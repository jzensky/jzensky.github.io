<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />

    <title>Jordyn Padzensky's HCDE 439 Physical Computing Page!</title>

    <link href="style.css" rel="stylesheet" type="text/css" />

    <!-- Added code styling through Prism.js */ -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>

  </head>
  <body>
    <h1>Jordyn Padzensky's Assignment 2!</h1>
    <div class="header">
      <p><b>Here is all the documentation for Assignment 2: Fade!</b></p>
    </div>
    <br>
    <p>The prompt is to create a schematic, circuit, and code that uses all of the following:
      <li> several LEDs (at least 3),</li>
      <li> a button, tilt switch, or a switch you make yourself,</li>
      <li> a for-loop,</li>
      <li> digitalWrite(),</li>
      <li> digitalRead(),</li>
      <li> and analogWrite().</li>
    </p>
    <br>
    <h2> Here is my schematic!</h2>
    <img src="A2-Schematic.png" />
    <p> I wired each leg of the RBG LED to its own pin (PWM pins 9-11) in order to change the colors by controlling them independently with different PWM values. 
      After the resistors, each positive leg of the RGB LED is connected to the same ground to represent the structure of the RBG LED having a singular negative leg. 
      The type of resistor for each leg of the RBG LED is based on calculation using Ohm's Law. 
      For the red and green LEDs, using 5V minus a 1.8V drop for the LED, 
      and 20mA (or 0.02A) of current (based on the optimal level to power these LEDs), I calculated that each required 160 ohms of resistance.
      Since I don't have a 160 ohm resistor, I rounded up to 220 ohms. 
      I rounded up because, according to Ohm's law, this would slightly reduce the current to around 14.5mA, which only slightly reduces the brightness of the LED.
      If I rounded down, the current would increase beyond 20mA, which would risk the LED burning out. 
      I followed this calculation process for the blue LED, which has a voltage drop of 3.3V. 
      Using this value, I calculated 85 ohms of resistance, which I rounded up to 100 based on my available resistors.
      For the button, I wired it to pin 2 to track its state.
      I also wired the button to a 10k ohm resistor, then ground, based on two factors:
      <li> When the switch is not pressed, it connects pin 2 to ground. This keeps the wire from "floating".</li>
      <li> When the switch is pressed, the resistor ensures that the circuit isn't sending 5V to ground, which can hurt the Arduino and power supply.</li>
      <li> 10k is considered a standard resistor value for this button switch, 
        as it provides enough resistance to limit the current while still being able to ensure a reliable HIGH state. </li>
      Lastly, the button is connected to 5V to ensure pin 2 will detect HIGH when the button is pressed, enabling the functionality.</p>
    <br>
    <h2> Here is my circuit in Fritzing and real life!</h2>
    <div class="row">
      <div class="column">
        <img src="A2-Circuit-Fritzing.png" style="width:100%">
      </div>
      <div class="column">
        <img src="A2-Circuit.jpg" style="width:100%">
      </div>
    </div>
    <p> On my breadboard, I used color-coordinated wires to connect each PWM pin (9-11) to appropriate resistors, then each positive leg of the RBG LED.
        I used a black wire to connect the negative leg of the LED to ground.
        I then connected leg 1 of the button switch to digital pin 2, leg 2 to the resistor, then ground, and leg 4 to 5V.
        With this arrangement, when the button isn't pressed, no voltage will pass from leg 4 to legs 1 and 2, resulting in a LOW reading from pin 2.
        When the button is pressed, the voltage will pass through and be measured as HIGH by pin 2 (connected to leg 1). </p>
    <br>
    <h2> Here is my code!</h2>
      <pre>
        <code class="language-c">
          // variable for the pin number connected to the button
          const int buttonPin = 2;
          // variable for the pin number connected to the red leg of the RBG LED
          const int redPin = 11;
          // variable for the pin number connected to the green leg of the RBG LED
          const int greenPin = 10;
          // variable for the pin number connected to the blue leg of the RBG LED
          const int bluePin = 9;

          void setup() {
            // set buttonPin as input
            pinMode(buttonPin, INPUT);
            // set redPin as output
            pinMode(redPin, OUTPUT);
            // set greenPin as output
            pinMode(greenPin, OUTPUT);
            // set bluePin as output
            pinMode(bluePin, OUTPUT);
          }

          void loop() {
            // use for-loop to fade through 0-255 brightness on red 
            for(int i = 0; i &lt; 256;i++){
              analogWrite(redPin, i);
              // hold value for 10ms
              delay(10);
              // run function to stop if button is pressed
              checkButtonState();
            }
            
            // use for-loop to fade through 0-255 brightness on green
            for(int i = 0; i &lt; 256;i++){
              analogWrite(greenPin, i);
              // hold value for 10ms
              delay(10);
              // run function to stop if button is pressed
              checkButtonState();
            }
            // use for-loop to fade through 0-255 brightness on blue
            for(int i = 0; i &lt; 256;i++){
              analogWrite(bluePin, i);
              // hold value for 10ms
              delay(10);
              // run function to stop if button is pressed
              checkButtonState();
            }
          }

          // function to turn off RGB LED while button is pressed
          void checkButtonState() {
            // while the button is held, turn off all colors of RBG LED
            while (digitalRead(buttonPin) == HIGH) {
              digitalWrite(redPin, LOW);
              digitalWrite(greenPin, LOW);
              digitalWrite(bluePin, LOW);
            }
          }
        </code>
      </pre>
      <p> In my code, I use constant variables to set the pin numbers of each positive leg of the RGB LED and the button. 
        They are constants because they won't change.
        In my code, I used 3 for-loops, one for each RGB LED color, to cycle through the brightness of each (0-255) and create a fading effect.
        In each loop, after adjusting the brightness based on the iterative value of the loop, I include a 10ms delay to slow the fade, and run a function to check the state of the button.
        This function reads the value of the button, and while it's pressed, all colors of the RGB LED are turned off.
        I used a function for this to better organize my code and reduce redundancies.</p>
      <br>
      <h2> Here is a .gif of my circuit in action!</h2>
      <img src="A2-V2-Gif.GIF" />
      <br>
      <h2> And lastly, here are some additional questions and answers!</h2>
      <br>
      <p><b>1: Draw a chart where the X axis is time and the Y axis is voltage. 
        Draw 3 lines representing the voltage across an LED with 
        analogWrite(led, 64), analogWrite(led, 128), and analogWrite(led, 255).</b></p>
      <img src="A2-Graph.jpg" />
      <p> This graph of Voltage vs Time shows how an LED with a Duty Cycle of 255 will be constantly on,
          while a cycle of 128 will be on for 50% of the cycle, and a cycle of 64 will be on for 25% of the cycle.
          The length of a full cycle is 2 milliseconds, as found <a href="https://docs.arduino.cc/learn/microcontrollers/analog-output/">here</a> on Arduino docs.</p>
      <br>
      <p><b>2: Given your schematic, circuit, and firmware, assuming the only thing that draws current is your LEDs, 
        how long would your circuit run if powered by a 1200 mAh battery?</b></p>
      <p>My circuit cycles through the full brightness range (0-255) of 3 colors: red, green, and blue, holding each brightness for 10ms.
        Since the cycle holds all colors and brightness values for equal durations, we can calculate the average brightness as 50%.
        With the duty cycle at 50%, the circuit draws an average current of 10mA (half of the typical current). 
        Dividing 1200mAh by 10mA gives a total run time of 120 hours.
      </p>
      <br>
      <p><b>3: Measure and record the actual voltage across one of your LEDs when it's on. 
        How does this compare to the theoretical forward voltage for your LED color?</b></p>
      <p> Using a multimeter, I measured the forward voltage across each color of my RGB LED when it was on full brightness:
        <li>Red: R=2.04V (theoretical: 1.8V), this is slightly higher than expected.</li>
        <li>Green: G=2.59V (theoretical: 1.8V), this is quite higher than expected.</li>
        <li>Blue: B=2.92V (theoretical: 3.3V), this is decently lower than expected.</li>
        Since theoretical forward voltages are typical ranges in testing conditions at a fixed current (20 mA), 
        while the actual LED current varies with shared connections, resistor values, and other factors, these differences are to be expected.
      </p>
      <br>
      <p><b>4: Did you use AI tools in completing this assignment? 
        If yes, please provide details on how/when, as well as a brief reflection. 
        If no, you can either leave this question blank, or provide other information if you'd like.</b></p>
      <p> I did not use AI tools in completing this assignment. </p>
  </body>
</html>
